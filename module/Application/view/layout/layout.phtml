<?php

$this->headTitle()->setSeparator(' - ')
                  ->setAutoEscape(false);
$basePath = $this->basePath();

//Twitter Bootstrap styles
$this->headLink()->appendStylesheet($basePath . '/css/bootstrap.min.css');
//Twitter Bootstrap style override by DluTwBootstrap
$this->headLink()->appendStylesheet($basePath . '/css/dlu-tw-bootstrap.css');
//Add your own style here
$this->headLink()->appendStylesheet($basePath . '/css/style.css');
//Twitter Bootstrap responsive styles
$this->headLink()->appendStylesheet($basePath . '/css/bootstrap-responsive.min.css');

//jQuery and Twitter Bootstrap JS libraries
$this->inlineScript()->appendFile($basePath . '/js/jquery-1.8.2.min.js');
$this->inlineScript()->appendFile($basePath . '/js/bootstrap.min.js');
$this->inlineScript()->appendFile($basePath . '/js/bootbox.min.js');
$this->inlineScript()->appendFile($basePath . '/js/jquery-timing.min.js');
$this->inlineScript()->appendFile($basePath . '/js/jquery.event.frame.js');
$this->inlineScript()->appendFile($basePath . '/js/jquery.parallax.min.js');
$this->inlineScript()->appendFile($basePath . '/js/nouron.js');
$this->inlineScript()->appendFile($basePath . '/js/techtree.js');
$this->inlineScript()->appendFile($basePath . '/js/innn.js');
$this->inlineScript()->appendFile($basePath . '/js/galaxy.js');
$this->inlineScript()->appendFile($basePath . '/js/fleets.js');
$this->inlineScript()->appendFile($basePath . '/js/trade.js');

echo $this->doctype();
?>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <?php echo $this->headTitle('') ?>
    <?php echo $this->headMeta()->appendName('viewport', 'width=device-width, initial-scale=1.0') ?>
    <!-- Le styles -->
    <?php echo $this->headLink() ?>
    <?php echo $this->headStyle(); ?>
    <!-- Scripts -->
    <?php echo $this->headScript() ?>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="<?= $this->url('home') ?>"><?= $this->translate('Nouron') ?></a>
          <div class="nav-collapse">
              <? if ($this->zfcUserIdentity()): ?>
              <?     echo  $this->navigation('navigation')->menu()->setMaxDepth(0)->setUlClass('nav'); ?>
              <ul class="nav pull-right">
                <li class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle" href="<?= $this->url('settings') ?>"><?= $this->zfcUserIdentity()->getUsername(); ?> <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="<?= $this->url('zfcuser/changepassword') ?>">Passwort ändern</a></li>
                        <li><a href="<?= $this->url('zfcuser/changeemail') ?>">Email ändern</a></li>
                    </ul>
                </li>
                <li><a href="<?= $this->url('zfcuser/logout') ?>"><i class="icon-off"></i> <?= $this->translate('logout') ?></a></li>
              </ul>
              <? else: ?>
              <ul class="nav pull-right">
                <li><a href="<?= $this->url('zfcuser/login') ?>"><?= $this->translate('Login') ?></a></li>
                <li><a href="<?= $this->url('zfcuser/register') ?>"><?= $this->translate('Register') ?></a></li>
              </ul>
              <? endif; ?>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>
    <div class="container">
        <?
        // flash messages if any
        // First get the viewmodel and all its children (ie the actions viewmodel)
        $children = $this->viewModel()
                         ->getCurrent()
                         ->getChildren();
        $ourView  = $children[0];

        if ($this->zfcUserIdentity() && isset($ourView->possessions)):
            echo $this->resources($ourView->possessions); ?>
        <hr />
        <? endif; ?>

        <div class="flashMessages" id="flashMessages">
        <? if (isset($ourView->flashMessages) && count($ourView->flashMessages)) :
            foreach ($ourView->flashMessages as $message) : ?>
            <div class="alert"><?= $message; ?></div>
            <? endforeach;
        endif; ?>
        </div>
        <? echo $this->navigation()->menu()
                                   ->setUlClass('nav nav-tabs')
                                   ->setOnlyActiveBranch(true)
                                   ->setRenderParents(false)
                                   ->setMinDepth(1)
                                   ->setMaxDepth(1);
        echo $this->content; ?>
        <hr />
    </div><!-- /container -->
    <?php echo $this->inlineScript(); ?>
    <script  type="text/javascript">
    $(document).ready(function() {
        if ($('#fleet').length > 0)  {fleets.init(); }
        if ($('#trade').length > 0)  {trade.init();  }
    });
    </script>
  </body>
</html>
